

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Using Plotly Dash to build a dashboard &mdash; Daeploy  documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using Daeploy with Conda" href="conda.html" />
    <link rel="prev" title="Using Streamlit to build a dashboard" href="ui_streamlit.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html">
          

          
            
            <img src="../../_static/daeploy_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Overview</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../overview/daeploy_description.html">Daeploy</a></li>
</ul>
<p class="caption"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/custom_service.html">Anatomy of a Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/service_logs.html">Read Logs From Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/autodocs.html">API Autodocs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/shadow_deployment.html">Versioning and Shadow Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/reaching_service_from_external_applications.html">Reaching a service from external applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/ticker.html">Schedule Repeating Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/monitoring.html">Monitoring Your Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/cross_service_communication.html">Cross-service Communication</a></li>
</ul>
<p class="caption"><span class="caption-text">Advanced User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/sdk_typing.html">Typing in the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/using_multiple_hosts.html">Using Multiple Hosts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/email_notifications.html">Email Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/manager_api.html">Manager API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/adv_deploy.html">Deployment Options</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/cli_autocompletion.html">Autocompletion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/service_environment.html">Service Environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/manager_configuration.html">Manager Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/testing_services.html">Testing Services Before Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/proxy_dashboard.html">Proxy Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/upload_image.html">Upload local docker image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/status_codes.html">HTTP Status Codes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/integration_with_other_tools.html">Connecting Daeploy with Other Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/going_beyond_sdk.html">Going Beyond the SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../advanced_tutorials/daeploy_notebook_service.html">Work With Daeploy From a Notebook</a></li>
</ul>
<p class="caption"><span class="caption-text">Special Usecases</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="deploying_ml_model.html">Deploying Machine Learning Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="ui_streamlit.html">Using Streamlit to build a dashboard</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using Plotly Dash to build a dashboard</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-plotly-dash-application">Example Plotly Dash application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotly-dash-application-as-a-standalone-service">Plotly Dash application as a standalone service</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plotly-dash-application-as-part-of-a-sdk-based-application">Plotly Dash application as part of a SDK-based application</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Using Daeploy with Conda</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu_services.html">Access NVIDIA GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="hosting_static_html.html">Host static HTML pages using Daeploy</a></li>
</ul>
<p class="caption"><span class="caption-text">Api Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/cli.html">Command-line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_reference/sdk.html">Software Development Kit</a></li>
</ul>
<p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../3rd_party_software.html">3rd party software</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Daeploy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using Plotly Dash to build a dashboard</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/content/special_usecases/ui_plotly_dash.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="using-plotly-dash-to-build-a-dashboard">
<span id="plotly-dash-service-reference"></span><h1>Using Plotly Dash to build a dashboard<a class="headerlink" href="#using-plotly-dash-to-build-a-dashboard" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial we will see how to create a service that serves a dashboard using
<a class="reference external" href="https://plotly.com/dash/">Plotly Dash</a>.We will not go into detail into how
to use Plotly Dash itself, but rather how to deploy a Plotly Dash application with Daeploy.</p>
<div class="section" id="example-plotly-dash-application">
<h2>Example Plotly Dash application<a class="headerlink" href="#example-plotly-dash-application" title="Permalink to this headline">¶</a></h2>
<p>We will use a <cite>hello-world</cite> Plotly Dash application in this tutorial that simply prints
<cite>Hello World</cite>. The code for this application looks like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="k">as</span> <span class="nn">html</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="n">debug</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In order to run this application, our <cite>requirements.txt</cite> will look like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dash</span>
</pre></div>
</div>
<p>That is all you need to run this Plotly Dash application locally. Lets now have a
look at making this example deployable and runnable with Daeploy.</p>
</div>
<div class="section" id="plotly-dash-application-as-a-standalone-service">
<h2>Plotly Dash application as a standalone service<a class="headerlink" href="#plotly-dash-application-as-a-standalone-service" title="Permalink to this headline">¶</a></h2>
<p>Let’s get som fresh boiler-plate directories/files using the functionality provided
by the Daeploy CLI:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daeploy</span> <span class="n">init</span> 
<span class="go">project_name [my_project]: plotly_dashboard</span>
</pre></div>
</div>
<p>To run the same dashboard on Daeploy only a few changes have to be made. First, when
creating the app-object we must tell Dash that it will be running under
some custom root_path (aka base_path):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">daeploy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span>
    <span class="vm">__name__</span><span class="p">,</span>
    <span class="n">requests_pathname_prefix</span><span class="o">=</span><span class="n">daeploy</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">get_service_root_path</span><span class="p">(),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>And when starting the server, we need to make sure that the Plotly Dash application
accepts connections from others than localhost:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The final application code should now look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="k">as</span> <span class="nn">html</span>
<span class="kn">import</span> <span class="nn">daeploy</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span>
    <span class="vm">__name__</span><span class="p">,</span>
    <span class="n">requests_pathname_prefix</span><span class="o">=</span><span class="n">daeploy</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">get_service_root_path</span><span class="p">(),</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">app</span><span class="o">.</span><span class="n">run_server</span><span class="p">(</span><span class="s2">&quot;0.0.0.0&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can now deploy the Plotly Dash app, like we would any other service, with one important
difference. Plotly Dash, by default, use port 8050 to communicate so we have to explicitly
set the port when deploying:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daeploy</span> <span class="n">deploy</span> <span class="n">plotly_dashboard</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">0</span> <span class="o">./</span><span class="n">plotly_dashboard</span> <span class="o">--</span><span class="n">port</span> <span class="mi">8050</span> 
<span class="go">Active host: http://your-host</span>
<span class="go">Deploying service...</span>
<span class="go">Service deployed successfully</span>
<span class="go">MAIN    NAME              VERSION    STATUS    RUNNING</span>
<span class="go">------  ----------------  ---------  --------  -----------------------------------</span>
<span class="go">*       plotly_dashboard  1.0.0      running   Running (since 2021-01-13 07:14:55)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Daeploy services created using the SDK use port 8000, which is the default
port for <code class="docutils literal notranslate"><span class="pre">daeploy</span> <span class="pre">deploy</span></code>. But when deploying other apps it might be necessary
to change it to not get a <cite>Bad Gateway</cite>.</p>
</div>
<p>Open <a class="reference external" href="http://your-host/services/plotly_dashboard/">http://your-host/services/plotly_dashboard/</a> and you should see your app there</p>
</div>
<div class="section" id="plotly-dash-application-as-part-of-a-sdk-based-application">
<h2>Plotly Dash application as part of a SDK-based application<a class="headerlink" href="#plotly-dash-application-as-part-of-a-sdk-based-application" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to add a Plotly Dash application as a (sub-)part of an SDK-based
service. This is done by mounting the Plotly Dash <code class="docutils literal notranslate"><span class="pre">server</span></code> on the SDK <code class="docutils literal notranslate"><span class="pre">app</span></code>. In the
example below, we mount the Plotly Dash <code class="docutils literal notranslate"><span class="pre">app</span></code> at the subpath <code class="docutils literal notranslate"><span class="pre">/dashboard/</span></code> under the
Daeploy SDK service <code class="docutils literal notranslate"><span class="pre">app</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">daeploy</span>
<span class="kn">import</span> <span class="nn">dash</span>
<span class="kn">import</span> <span class="nn">dash_html_components</span> <span class="k">as</span> <span class="nn">html</span>

<span class="c1"># We need a WSGIMiddleware to be the middleman between the asynchronous SDK app</span>
<span class="c1"># (based on FastAPI) and the synchronous Dash app (based on Flask). `starlette`</span>
<span class="c1"># is a dependency of FastAPI so it doesnt need to be added to the</span>
<span class="c1"># `requirements.txt`</span>
<span class="kn">from</span> <span class="nn">starlette.middleware.wsgi</span> <span class="kn">import</span> <span class="n">WSGIMiddleware</span>

<span class="c1"># Creating Dash app object that can be used as usual to build you Dash application.</span>
<span class="c1"># We make sure to give it the correct path where it will be mounted</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">dash</span><span class="o">.</span><span class="n">Dash</span><span class="p">(</span>
    <span class="vm">__name__</span><span class="p">,</span>
    <span class="n">requests_pathname_prefix</span><span class="o">=</span><span class="n">daeploy</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">get_service_root_path</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;dashboard/&quot;</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">(</span>
    <span class="n">children</span><span class="o">=</span><span class="p">[</span>
        <span class="n">html</span><span class="o">.</span><span class="n">H1</span><span class="p">(</span><span class="n">children</span><span class="o">=</span><span class="s2">&quot;Hello World&quot;</span><span class="p">),</span>
    <span class="p">]</span>
<span class="p">)</span>

<span class="c1"># We mount the Dash app server under daeploy.service.app on the subpath `/dashboard`</span>
<span class="n">daeploy</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s2">&quot;/dashboard&quot;</span><span class="p">,</span> <span class="n">WSGIMiddleware</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">server</span><span class="p">))</span>

<span class="c1"># And finally we start the service as we would with any other SDK-based service.</span>
<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">daeploy</span><span class="o">.</span><span class="n">service</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>Assuming we deploy our service as such (note that we no longer need to specify a custom
port number since we are using the SDK to actually run the application):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">daeploy</span> <span class="n">deploy</span> <span class="n">plotly_dashboard</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">0</span> <span class="o">./</span><span class="n">plotly_dashboard</span> 
<span class="go">Active host: http://your-host</span>
<span class="go">Deploying service...</span>
<span class="go">Service deployed successfully</span>
<span class="go">MAIN    NAME              VERSION    STATUS    RUNNING</span>
<span class="go">------  ----------------  ---------  --------  -----------------------------------</span>
<span class="go">*       plotly_dashboard  1.0.0      running   Running (since 2021-01-13 07:14:55)</span>
</pre></div>
</div>
<p>Your dashboard would then be available at <a class="reference external" href="http://your-host/services/plotly_dashboard/dashboard/">http://your-host/services/plotly_dashboard/dashboard/</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="conda.html" class="btn btn-neutral float-right" title="Using Daeploy with Conda" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="ui_streamlit.html" class="btn btn-neutral float-left" title="Using Streamlit to build a dashboard" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Viking Analytics AB.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: 1.0.0-beta
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="../../../1.0.0/content/special_usecases/ui_plotly_dash.html">1.0.0</a></dd>
      <dd><a href="ui_plotly_dash.html">1.0.0-beta</a></dd>
      <dd><a href="../../../1.0.1/content/special_usecases/ui_plotly_dash.html">1.0.1</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../../develop/content/special_usecases/ui_plotly_dash.html">develop</a></dd>
    </dl>
  </div>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>